# 响应的艺术：意愿系统

意愿系统（Willingness System）是 YesImBot 的灵魂，它决定了机器人何时以及如何响应。这套系统告别了简单的“关键词触发”，采用了一套复杂的评分和决策模型，旨在模拟真人的社交直觉。

## 告别冰冷的机器人

传统聊天机器人有两个痛点：
1.  **过于被动：** 只有在被明确触发时（如@或关键词）才说话，缺乏参与感。
2.  **过于主动：** 对每一条消息都进行响应，导致信息过载和刷屏。

YesImBot 的意愿系统旨在解决这个问题，让机器人学会在合适的时机、用合适的方式自然地加入对话。

## 四层决策模型

每一次收到消息，意愿系统都会通过一个四层模型来计算一个最终的“意愿分数”，这个分数决定了机器人是否会响应。

#### 1. 基础分数 (Base Scores)
- **作用：** 定义对不同消息类型（文本、图片、表情符号等）的初始兴趣。
- **示例：** 您可以让机器人对图片更感兴趣（给予更高的基础分），而对仅包含表情符号的消息反应冷淡（给予较低的基础分）。
- **配置路径：** `agentBehavior.willingness.base.scores`

#### 2. 属性加成 (Attribute Bonuses)
- **作用：** 对消息的特定“属性”给予额外加分，以响应重要的社交信号。
- **关键属性：**
    - `atMention`: 被 `@` 时获得大量加分，确保机器人必应。
    - `isQuote`: 当用户回复机器人的消息时获得加分，以鼓励连续对话。
    - `isDirectMessage`: 在私聊中获得加分，让机器人表现得更积极。
- **配置路径：** `agentBehavior.willingness.attribute.bonuses`

#### 3. 兴趣模型 (Interest Model)
- **作用：** 基于消息内容计算一个“兴趣乘数”，放大或缩小前面的得分。
- **工作方式：**
    - `keywords`: 当消息包含您设定的关键词时，应用 `keywordMultiplier`（一个大于1的乘数），显著提高意愿。
    - `defaultMultiplier`: 当没有匹配到关键词时，应用默认乘数（通常为1），不改变意愿。
- **配置路径：** `agentBehavior.willingness.interest`

#### 4. 生命周期 (Lifecycle & Conversion)
- **作用：** 这是一个动态的“精力条”系统，模拟人类的注意力和疲劳。
- **核心机制：**
    - `probabilityThreshold`: 意愿分数必须超过此阈值，机器人才**可能**回复。
    - `probabilityAmplifier`: 将超过阈值的分数转换为具体的回复概率。
    - `replyCost`: 每次发言后扣除的“精力”，防止机器人连续刷屏。
    - `decayHalfLifeSeconds`: “精力”会随时间自然衰减，模拟兴趣的消退。
- **配置路径：** `agentBehavior.willingness.lifecycle`

## “性格”的诞生：人格预设

为了简化复杂的参数配置，我们内置了多种“性格预设”。选择一种预设，系统会自动为您应用一套精心调整好的意愿系统参数。

- **`outgoing` (开朗活泼):** 话多，乐于参与，对各种消息类型反应积极。回复门槛低，精力衰减慢。
- **`professional` (高冷严谨):** 惜字如金，主要在被@或讨论专业领域（关键词）时才发言。回复门槛高，精力衰减快。
- **`caring` (温柔体贴):** 不主动挑起话题，但在检测到求助类关键词时会第一时间出现。
- **`default` (默认):** 一个平衡的配置，适合大多数场景。
- **`custom` (自定义):** 如果您想从头打造一个独一无二的性格，请选择此项并手动调整所有参数。

**配置路径：** `agentBehavior.willingness.personality`